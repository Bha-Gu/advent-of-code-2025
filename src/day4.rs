use crate::template::day;

#[inline]
fn problem1(input: &str) -> usize {
    let grid = input
        .lines()
        .map(|line| {
            line.chars()
                .map(|c| match c {
                    '@' => 1,
                    _ => 0,
                })
                .collect::<Vec<_>>()
        })
        .collect::<Vec<_>>();
    let mut out = 0;
    for (i, l) in grid.iter().enumerate() {
        for (j, c) in l.iter().enumerate() {
            if *c == 0 {
                continue;
            }

            let roll_count = match (i.checked_sub(1), j.checked_sub(1)) {
                (Some(i_1), Some(j_1)) => {
                    grid[i_1][j_1]
                        + grid[i_1][j]
                        + grid[i_1].get(j + 1).unwrap_or(&0)
                        + grid[i][j_1]
                        + grid[i].get(j + 1).unwrap_or(&0)
                        + grid.get(i + 1).map_or(0, |x| x[j_1])
                        + grid.get(i + 1).map_or(0, |x| x[j])
                        + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                }
                (Some(i_1), None) => {
                    grid[i_1][j]
                        + grid[i_1].get(j + 1).unwrap_or(&0)
                        + grid[i].get(j + 1).unwrap_or(&0)
                        + grid.get(i + 1).map_or(0, |x| x[j])
                        + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                }

                (None, Some(j_1)) => {
                    grid[i][j_1]
                        + grid[i].get(j + 1).unwrap_or(&0)
                        + grid.get(i + 1).map_or(0, |x| x[j_1])
                        + grid.get(i + 1).map_or(0, |x| x[j])
                        + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                }

                (None, None) => {
                    grid[i].get(j + 1).unwrap_or(&0)
                        + grid.get(i + 1).map_or(0, |x| x[j])
                        + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                }
            };

            if roll_count < 4 {
                out += 1;
            }
        }
    }
    out
}

#[inline]
fn problem2(input: &str) -> usize {
    let mut grid = input
        .lines()
        .map(|line| {
            line.chars()
                .map(|c| match c {
                    '@' => 1,
                    _ => 0,
                })
                .collect::<Vec<_>>()
        })
        .collect::<Vec<_>>();
    let mut out = 0;
    let mut flag = false;
    loop {
        if flag {
            break;
        }
        flag = true;
        for (i, l) in grid.clone().iter().enumerate() {
            for (j, c) in l.iter().enumerate() {
                if *c == 0 {
                    continue;
                }

                let roll_count = match (i.checked_sub(1), j.checked_sub(1)) {
                    (Some(i_1), Some(j_1)) => {
                        grid[i_1][j_1]
                            + grid[i_1][j]
                            + grid[i_1].get(j + 1).unwrap_or(&0)
                            + grid[i][j_1]
                            + grid[i].get(j + 1).unwrap_or(&0)
                            + grid.get(i + 1).map_or(0, |x| x[j_1])
                            + grid.get(i + 1).map_or(0, |x| x[j])
                            + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                    }
                    (Some(i_1), None) => {
                        grid[i_1][j]
                            + grid[i_1].get(j + 1).unwrap_or(&0)
                            + grid[i].get(j + 1).unwrap_or(&0)
                            + grid.get(i + 1).map_or(0, |x| x[j])
                            + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                    }

                    (None, Some(j_1)) => {
                        grid[i][j_1]
                            + grid[i].get(j + 1).unwrap_or(&0)
                            + grid.get(i + 1).map_or(0, |x| x[j_1])
                            + grid.get(i + 1).map_or(0, |x| x[j])
                            + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                    }

                    (None, None) => {
                        grid[i].get(j + 1).unwrap_or(&0)
                            + grid.get(i + 1).map_or(0, |x| x[j])
                            + grid.get(i + 1).map_or(&0, |x| x.get(j + 1).unwrap_or(&0))
                    }
                };

                if roll_count < 4 {
                    flag = false;
                    out += 1;
                    grid[i][j] = 0;
                }
            }
        }
    }
    out
}
day!(
    input,
    13,
    43,
    problem1(input),
    problem2(input),
    r"..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@.",
    r"@@.@@@@..@@@.@..@@@@@@@.@.@@@@..@@.@@.@@@@@@.@@.@@....@@..@@..@@...@..@@.@..@@.@..@@.@@......@@.@.@.@.@@@@@@.@...@.@....@@@@@.@@.@.@@..
.@@....@@..@@.@@@...@@@.........@.@.@@@@@.@@@@@@@.@@@.@.@@@.@@..@.@@@@..@@.@@.@.@.@.@@.@@@@@.@@@.@@@@.@@@@@@@@@@@.@..@..@@@.@.@..@@.@@@
@@@..@..@@@@@@@@@@.@.@@@..@.@..@..@@@@@..@@@@@.@.@@@@..@..@.@@@@.@.@.@@@.@@...@@.@@@.@...@@@@@@.@@@.@@@@@@.@.@..@@@....@..@@.@..@@.@.@@
@..@@.@..@.@@..@@@@@@@.@.@@@@@@@@.@@.@@@@@@.@@@....@@@.@.@@@.@.@@.@@@@@@..@...@@@@.@@@@@..@...@@@...@@@@@@.@@.@.@@@@.@@@@@.@@@..@@@.@.@
@@..@@.@..@.@@@..@@.@.@@@@.@.@@@.@@@@@@@@@.@..@@@@@...@.@@@@@@@.@@@@.@@@.@.@@.@..@@@@.@.@@@@@@@@@@@....@@.@@@@@@@..@@..@@@.@@@@@@@@@@.@
@@@@@..@.@@@@..@.@..@..@@.@@@@..@@.@@@@@@@..@@@.@@@@@@@.@.@..@@.@.@@@@@@@@@@@@@@@.@@.@.@@@.@.@@..@@.@@@@@.@@.@..@.@@@@@@@@.@.@...@@@.@@
..@@...@@@@@.@..@.@@.@.@@@@@..@@@@@.@..@.@.@.@@@@.@.@@@....@.@@@@@@....@@@@.@@@@.@.@@@@@@@@@.@.@@@@@@@.@@..@@@.@@@@@@...@@@@.@.@@.....@
.@@@@@@.@@@@@@@@@@@..@.......@@..@......@@.....@@@@.@@@@@@@..@....@@@@.@.@.@@..@@..@@@@.@.@@@@@@.@....@@.@@@@@@@@..@@@@..@@@....@@.....
...@.@@@.@@.@@@..@@.@@@@..@@@@@.@@.@..@@@.@.@.@@.....@...@.....@@..@@@.@.@@@@@@@@..@@@@..@..@@@@@.@.@.@@@@@.@@.@@@@@..@@@.@.@@@@...@@@.
@.@@.@@@@.@.@@...@@@@.@..@..@@.@.@.@.@@@@@@@@.@.@@..@@@.@..@.@.@@@@@@@@@@@.@.@@@..@.@@@..@@@@@@.@@@@@@@@@@@.@@.@@@@..@.@@.@.@.@@@..@.@.
.@@@@@@@@.@@@@@@@@@@.@..@@..@.@@@.@@@@@.@..@@.@@.@@@@@@..@.@.@@@@@.@.@@@@.@@@@@@@.@@.@@@@@@@.@@.@@..@.@@.@@@@@@@.@....@@@@@@@@..@..@@@@
@...@@@.@...@@@@...@@.@@@.@@@@....@.@.@@@@...@@@@.@@@@.@@@@@....@@@@@@@@.@..@@@@@@@@.@@@@@@@@@..@@@@.@@.@@.@@@..@@.@@@@@@..@@.@.@.@..@@
@.@@.@@@@..@@..@@@@@@..@.@@@.@@@.@@@.@@@@.@@@@@@@@@.@@.@.@.....@@.@@@.@.@.@@@@@.@@.@@@..@.@.@@@@@@@.@@@@@.@...@.@.@@@...@@@@.@@.@.@@@..
@@...@.@.@.@.@@.@@@..@.@@.@..@@@@@@@...@@.@@@@@@@@@@@@@..@@@@@.@..@@.@@@@..@.@..@@@@..@@@@@.@..@@.@...@@..@@@@@@@@..@@...@@@..@@@@@..@@
@@@.@@@...@@@..@@@@.@@..@@.@.@.@@@@@..@..@@@@.@@@.@.@.@.@@.@..@@@@.@.@.@.@@.@@@@..@..@@@..@.@..@..@@@@..@@@@@@.@@...@..@@.@@@.@.@.....@
@@@@@@...@..@@.@@.@.@.@@.@@@.@@@..@..@..@@@@@@@.@@@.@@@..@@@@..@.@@.@.@@.@@...@@@.@@@@@.@@@@@@@..@@@@@.@@.@@@@..@.@.@@.@@.@.@@@@@@.@.@.
@.@@@.@@@@@.@....@@@@.@.@.@@@@@@..@@@.@@@@@@@@@@@@@@@@@.@.@@@@@.@.@.@.@@@.@@@@@@..@@@...@@@@.@@@@@@.@@@.@@@@@@.@@@.@@@.@@@@@@@@@..@.@.@
@@@@....@@@@@@.@@...@..@@@@@.@@@..@@.@@@@@@@.@.@@@@..@....@@@@@@@@.@@@@..@@@.@..@@.@.@..@....@@@.@@.@@..@@@..@@@@@@.@@@@@@.@.@.@@@@@@@@
.@@@.@@@@@@@.@@@@@..@.@.@@@@@@@@.@@.@@@.@@.@@@@@@.@...@...@@..@.@@@.@..@.@@.@@..@.@@..@.@...@@@@.@@@@@@.@@.@@@.@@.@@@@@@.@@..@.@@...@@@
@@@@@.@@..@.@.@@@..@@@@@@@.@@.@@@@@@@@@@@.....@@@@@@.@@@..@@.@@@@@@@@@@.@.@.@@@@.@.@.@@.@.@@@@@@.@.@@@@@@@.@..@..@.....@@.@@@@@@..@@@..
@@@..@@@@@@..@.@@..@@@.@@@@@@@..@@.@@@@@@.@@..@.@.@@@@@.@@@.@.@.@@@.@.@@@@.@@...@..@@..@.@@.@@..@@.@@@@.@.@..@@@..@.@@...@@@@@@.@.@...@
@@@.@@@@@@@.@.@@@@@.@@.@.@.@.@.@@@@.@@.@@.@.@@@...@@@.@...@@.@@@@..@@.@@@.@.@.@@@.@@.@.@..@.@@@@@..@.@@@@@@@@@.@@@.@@@@..@..@@.@@.@@.@.
....@@.@@.....@@@@.@.@..@@@.@@.@@@.@@@@@@.@....@@@@@..@@@@..@.@..@@.@.@@..@@@@@@...@@@.@@@@@.@.@@.@@@.@..@@@.@.@@@@@.@@...@@@@@.@@@@.@@
@.@..@@@@@@@.@@@@@@@@@.@.@@@@@@@.@.@.@.@.@@.@@@@@@@@@..@@..@.....@.@@@.@@.@.@@@@@@.@@@@..@@@..@@.@@@@@.....@@..@@@@..@.@@..@@@@@@.@.@.@
.@@@.@@@..@...@@@@@.@.@@@@@.@.@@..@@.@@.@@@.@..@@.@.@@@@@.@@@@..@@@@@.@@..@@@@@@@..@@@.@@@@.@@@@@@......@@..@@@@.@@@@@@.@@@@@@@@.@@.@.@
.@@@@@@.@@@.@@.@@@@.@@.@.@.@@@@..@@@@....@@.@@.@@@.@@..@.@@@@..@@@...@...@.@@@.@@@@..@@@@@@.@@@..@@@@.@@@@.@@@.@.@...@@.@@@.@@@@.@@@.@.
..@@...@@.@.@@...@@@@...@@......@@@@@.@.@...@@@@@@@.@@.@.@@.@@.@@....@@.@@@@@..@.@.@@.@@@...@@.@..@.@@@@@.@..@@@...@@@.@@@.@@@@@.@.@@@@
.@@@@@@.@@@.@@@.@@.@@.@....@@.@@@@@..@@@@.@.@@@@@@..@@@.@@.@@@.@@.@@@@..@@@@@..@.@@..@@@@@@@.@..@@@..@@@@@@@.@@.@@@..@@@.@@.@@@@.@@@@@@
.@@@@@@@.@@@@.@..@@..@@@@.@@..@@@.@@..@@.@@@@@@.@@.@.@@..@..@@@@@@@@.@@.@@@@@..@@.@.@@.@@@@@@....@@.@@...@@.@@.@@@@@.@...@@@@@@@@@@@.@@
.@@@..@...@.@.@..@@...@@@@@@.@.@@@.@@@@@.@.@.@.@@@@@@..@@.@@.@.@@@@@@@.@@@@@.@@@..@...@..@@.@@@@@.@@@@.@.@...@@@.@.@@.@@@@@@@@.@@.@@@@.
@@@.@@@@@@.@@@.@.@@@@..@@@.@@.@@@.@@.@@@@.@@.@@@@@@.@@.@@@@@@.@@@@@.@@.@..@..@@@.@..@.@@...@.@@@.@@@@@.@@@@@.@.@@@@@@@@@.@@.@...@@@@@@.
@@@.@.@@@....@@.@@@.@@@..@@@@@@@@...@..@@@.@..@@.@..@@..@@@.@@.@@..@@..@.@@@@...@.@@@@...@@@@..@@@@.@.@.@@@@@.@@.@..@@.@@@@@@.@@@..@@..
@...@@@.@@@...@.@...@@.@...@@.@.@@@..@..@@@@@@@@@@@@..@..@@@@.@@.@@.@..@.@@@.@.@@@@..@..@@.@@.@@@@.@@.@@@.@@@@.@@@..@@@.@....@..@.@@.@@
@@@..@..@@@@.@.@.@@@.@...@@@.@@...@@......@..@.@.@@@@.@@.@@@..@@@@@@@@@@@@@.@@.@@.@@@.@@@@@@...@..@@@@@@@@@.@@@@@@@@@@@@@@..@.@@@@@..@@
@@@@@@.@@@@@.@.@@@..@@@.@@@@@@.@.@@.@@@@@.@.@@.@.@.@@.@.@..@@......@..@@@..@@.@@....@..@.@.@@@@@@@@@..@..@@@@@.@.@@@@@@@@.@@@@@@.@.@.@@
@...@@@.@.@.@..@@@@@@.@@@...@.@@@@@@@@@@.@@@@@..@@@@@@@@@@@.@..@.@@....@@..@@@@..@@@.@.@@..@@@@..@@@..@.@..@.@@@.@@..@@@@@@@.@@@..@@..@
@@@@.@@.@@@@@@@@....@....@@@@.@......@@@@@@@@.@@@@.@@@@.@.@@@..@@@...@@@@@@@...@@..@@..@@.@@@.@@@.....@@..@@.@@.@.@@@.@@@...@.@@.@.@@..
....@@.@@@@..@@.@.@@@...@.@@.@@@.....@@@@@@..@..@.@@@@.@..@.@@@.@@..@@@@@@@@@@@@@@@.@.@.@@@.@@.@@@@@@@..@@@@@@@@@@..@.@.@@@..@.@@@@@@@@
.@@@@.@@.@@@@@@.@@@@.@@@@.@@.@@.@@@@@@@@.@...@@@@@@@@....@@.@@....@@.@@@@@.@...@.@..@@@@@@@.@@...@.@@@@.@.@@..@@...@@@.@.@.@.@@..@@...@
@.@@.@@..@...@@@@.@.@...@@@.@@.@@@.@@..@@.@@.@.@@@.@@.@.@@@.@@...@@.@@@.@.@.@@@.@@@@@@.@@.@@@.@@.@@@.@.@@@@@@@@.@@@.@.@.@@@@@...@@@.@@@
@@.@@@.@.@..@@...@.@@@@@@@@@.@.@@@@.@..@@@..@.@.@.@@@...@..@.@.@@@@.@.@..@@.@@.@@.@@@@@@@@@@..@.@..@.@.@.@..@.@@@...@@....@@@.....@.@..
@..@..@.@@@@.@@@@@@@@@.@..@@@..@.@.@....@@@@@@.@@@....@@.@.@..@@@@..@@@@@@@@...@@@@.@@@@@@@@..@@@..@@@@@..@.@@@@.@.@@@@@@..@@.@..@.@@.@
@@@@.@.@@..@@@@@@@@...@@..@.@@@@.@@@..@@..@@.@@@@.@@.@.@...@..@@@@..@.@.@@.@@..@.@@.@@@@@@@@@@..@@@@@.@.@..@.@.@.@@@@@@.@@@@@...@..@@@@
@.@@.@@@@@@.@@.@..@@@.@@@.@@..@@..@.@@..@.@...@@@@@.@.@@@..@@.@@@@@@@.@...@.@@@@.@...@..@@@@@@.@@.@@.@@@@@@..@@.@@....@@@.@.@@@..@@@@@@
.@@@@..@@@@..@.@..@.....@@@@@@.@.@@.@.@.@@@@...@.@@@..@.@.@@.@@.@@@.@@@.@@@@@@@.@.@@@.@@.@.@@@@.@@@.@@@@....@@@.@@@@@@@.@..@..@.@@.@..@
@..@@.@@@@@@@@@.@@.@@@..@@@@@.@.@@@..@@@.@.@@@@.@@.@@@..@.@.@.@.@@.@@@@.@@@@..@..@.@@@@@@@..@@@@..@.@....@..@@.@@@.@.@.@@@@@@@@.@@.@@@@
...@...@@......@.@...@.@@@...@@@.@@@@@@@@@.@@..@@.@..@@@@.@.@@@...@@.@.@..@.@.@@@@.@@..@.@.@.@.@@@@.@@@.@..@@@@.@@..@@..@...@@@.@@@@.@.
@@@@@@@@.@@@.@@.@@@.@@@@..@@...@.@@@@@.@@@@@@@@@@@@@@.@.@@@..@@@..@@@@@@@@@@@@@@@.@@@.@@.@@.@..@.@@@@.@@@@@@@@...@@@.@.@@@@@@@.@.@@@@@.
@.@@@@.@@@@@@..@@@...@@..@.@@@@@@..@.@@@.@@@@@@@@.@.@....@....@@@.@.@@.@.@@.....@.@@@@....@@@@@@@@@@@...@.@@@@@.@.@...@...@@@....@@@...
..@.@@@@..@@@@@@@@@.@@...@..@@@@@@.@@..@@.@@@@@@@..@...@@@@@@@@@@@@@@.@@@..@.@@@@@..@@@@.@..@.@.@@@@@..@.@.@.@@@@.@@..@..@@.@@@@....@..
.@@.@...@.@@@@.@@...@@@.@@@.@@@..@.@@@@.@@.@.@@@@...@.@@@@@.@@.@.@..@@@...@@@@@.@@.@@@@.@.@@@@..@@@@@@@@@...@@..@..@@@@@..@@..@@.@.@@@.
..@.@@......@@.@@.@@.@@@.@@..@@@@@...@@.@@..@.@@.@..@@@@...@@..@@@@.@@@@@@@...@@@@@..@@.@@@.@@..@..@@.@@..@@..@@.@@@@@@@@@.@.@@@@.@.@..
@@@@.@@@@@@.@@@.@.@@@@..@..@.@@@@@@.@.@.@@.@@@.@@@@.@.@@.@@..@@.....@..@@@.@@..@@.@.@@.@.@@@.@....@.@@.@@@....@@@.@.@@@.@..@.@@.@@.@.@@
@@...@..@.@@@@@@@.@@@@@@@.@@...@..@@.@@@@@@@@.@@.@@@..@@@@@@@@@.@.@@@@.@@@@@@@..@@..@...@@@@..@.@.@@@@.@@.@@@..@@.@@...@@@@.@@@@@...@@@
@@@@..@@..@@@.@@@@@.@.@@@@@@@@@.@@..@@@....@@@@@..@.@.@@....@@@.@..@@.@.@@.@@@@.@@.@@.@@@@@@.@@@@@@@...@.@....@.@...@@@@@...@@..@@@.@@@
@..@.@...@.@.@.@@.@..@@@@@@@@@@@@@@@..@@.@.@@.@@@@@@.@@@@@..@.@@.@.@.@@@..@@@@@@.@.@@..@@@.@@@@.@@@@.@@@@@.@..@@.@@@@.@@@@@@@@..@@@@.@.
@@@@@..@.@..@.@@.@@@..@@@.@@@@@.@@@..@@@@.@@@@@@@@@@@.@..@..@.@@.@@@.@..@@@@@@@@.@@@.@@@@@..@..@@@@@@....@@@@.@....@.@@.@@@.@@@..@@@@@.
@@@@@@.@@@@..@.@@.@@@@.@@.@@...@@@@@@@.@@@@@@..@@.@.@@@.....@@@@.@@.@@@@@@@@..@@@@@@@@.@@@@@@@@@...@@@@@@@..@@@@@@@@..@..@.@@@@@@.@@@@@
@@@@.@@@..@@.@@.@..@@@.@@@@.@.@.@@.@.@..@@@.@@@@@@.@.@@..@...@@@@@@@@.....@@@@@@.@.@@.@@@@..@.@@@@@.@@.@@..@.@@@.....@@@.@..@.@@@..@@@@
..@..@.@@.@..@@@@@...@.@@@@.@..@.@@@.@..@@@@@@@..@..@@@@@.@@@@@@@.@.@@@.@@.@@@........@..@@@@@@.@.@@.@.@@.@@@.@@.@@@..@@@@..@@@.@@@@.@@
..@.@..@.@@@@@..@..@@@..@..@@@@@@@@.@@@@....@..@.@@@.@@@@@@@@@.@.@...@.@@@@@@@.@@@...@@@..@..@@@.@.....@.@@....@@@@@@.@@@..@@@.@@..@.@@
.@@@...@.@@@@@@@@@@@.@...@@@.@@@.@.@.@@@@@@@@.@..@.@@@@@@.@@.@...@@..@..@@@@.@@.@@@.@..@@..@@@@.@....@@@.@@.@@@@@@.@@@...@@...@@@.@@@.@
.@@.@.@@.@@@@@@@.@..@@@..@@.@@@.@@.@@@..@@@.@@@@@...@@@.@.@...@.@@@..@.@@..@..@.@.@.@.@@@@..@.....@@@@@@@@..@@@@@@@.@@.@@@@@@@@@.@@@.@@
@.@@..@..@@.@@..@..@@...@....@.@@@..@.@@..@@@.@@@@@...@@.@.@..@@@@@@@@@@@@.@@.@.@@...@@@@@@@@@@@...@@@@@..@.@@@..@@@....@@@.@@@@@.@@@@.
.@..@..@@.@.@@.@@@..@.@@@@@.@@@@.@@@@@@@.@@@@@@.@.@@@@.@@@.@.@@@..@@.@..@@@@@@@@.@..@@@..@@.@@@.@@.@@..@@@.@@@@@@.@@@.@.......@@@.....@
.@@@.@@.@.@@@@@.@@.@.@@@.@@@@.@@.@@@@@.@@@@@.@...@@..@@@@@..@@.@@@@@@@@.@.@@@..@..@@@@@..@@@@@.@@.@@@.@.@..@@.@@@@@@..@.@@@@@@@@.@.@..@
...@@@@@@.@.@@....@@.@@@@..@...@.@@@@@@@@.@@@.@@@.@..@.@@@@@@@.@.@.@@..@@@.@.@@.@...@@@@@@..@.@@@...@.@@...@..@@@@.@..@.@@@@.@@@@@..@..
@@@@...@.@@.@.@@@@.@@@@.@@@...@@.@.@@@@@@.@@@@@@@.@@..@..@@@@@@..@.@..@.@@@.@..@@@@@@@@@.@.@@@@@.@@@.@.@.@.@@@@@@..@@@@@@@...@....@.@@@
...@..@@@@@.@.@@@@@@.@.@.@@@.@@.@.@@@@@.@@@.@@@@..@.@.@@..@@@@@@.@.@@@@@@@@.@.@@@..@.@@@@@@@@..@@.@@@.@.@@..@@@@..@.@@.@.@@.@.@.@@@.@@@
@@..@@@.@.@.@.@@@@@.@..@@@..@.@@@.@.@@@.@.@@.@.@.@@@..@.@@@@@@.@@.@@.@.@@.@.@@.@.@.@@.@@@@@@@.@@..@@@.@.@.@@..@@@.@@.@@@@..@@....@@.@.@
@.@@@.@@.@...@.@@@.@@.@.@@@@@..@.@@@.@@@.@..@..@..@.@@..@@.@@.@@@.@..@@.@@..@@@@@@.@..@@@...@@@@.@@@.@@@@.@@@@@.@@@@....@.@@..@@.@@@.@.
.@.@@@@@@@.@@...@.@@@.@.@@@@@.@.@@@.@@@.@@@@@@@.@...@@.@@@.@@@@@....@@@@.@@@@@@@@.@@@@..@..@@.@@@.@@@@.@.@@..@@@@@@@@@@.@@@.@....@@.@@@
@@.@@@@..@@.@.@.@.@@.@.@.@@@.@.@@@@@@@@@@...@@.@@@@.@@@.@@@@.@.@.@.@@@@.@@.@@@@@....@@@.@@@.@@@.@@@@@@.@@@@@@.@.@@..@..@@@@..@.....@@@.
@@@@@@@.@@@@.@@@@.@@@@@@@..@@@@..@@@.@@..@.@@@.@@.@.@@@@..@..@..@.@@@@.@@@.@@....@.@@@@@@.@@@@@@@@.@.@..@.@.@.@.@..@@.@@.@@@.@@@@@@.@@@
@...@@@.@@@.@@@.@.@@@.@..@.@@@.@@.@@.@@@....@@@@@@@@@@.@...@@@.@@@@@.@@.@@@.@@@@.@@.@@@@@.@.@@@.@@@@@@@@@@@..@@..@@@@.@@@..@...@@@@@@..
@@@@@@@@..@..@..@@@.@@@.@@.@.@@@@.@@@@@@@...@@@@@@..@..@.@...@.@@@@@@@@@.@@..@.@@@@..@@..@@@@@.@@@.@@@@@.@@@.@...@@.@@@@@@..@@@@@@....@
@@@..@@@.@.@.@@..@.@@.@..@@@.@@..@@@@..@@.@@.@@@@@@.@..@@...@@.@@.@.@@@@@@...@@@@@@@@@..@@..@@.@.@.@@@@@@..@..@@@@@..@.@@@@@@@@@@@.@@.@
@@.@@..@@@@@.@@@@@@@@.@@@.@@@@.@@@.@@@@@@@.@@@@@@@.@...@@@..@@@@@..@@@@....@@.@@.@@.@.@@@@@@.@...@.@@..@.@@.@@..@@..@.@@@@@@@@@...@@.@.
@@@@@.@.@@@.@@@.@@.@@@.@@@@@.@.@.@.@@@..@@@@@@@.@@.@@@@@.@.@@@@@.@.@@@@@.@@@@.@.@@@@.@@@@.@@@..@@..@...@..@..@@@.@.@@.@@@.@@.@@@@@@@.@.
@@@.@@.@@@@@@...@@....@@@.@@.@@@@@.@@@@.@@@@@.@@@@@@.@@@@@.@@@@@@@@@@..@@@@@@@@@.@@.@...@.@....@.@@.@.@.@.@@@@@@@@@..@.@@@@.@@.@@.@@..@
..@@@@@@@@@@@@.@@.@.@.@..@@@.@@@@@.@@@@@.@@@@@@..@@@@@@...@@@@@...@@@@@@.@@.@@@..@@@.@@@..@.@@.@...@@@@@@@@@.@@@..@@..@@@@@@@@@@.@...@.
..@.@.@@@..@@@@.@@@...@@@@.@@@@@..@@@.@.@@@@..@..@@@.@@@.@.@@....@@@@@@@@@@.@@@@..@.@@...@...@@@@@@@@.@@.@.@.@@@@@@@@.@.@@@..@..@@@@.@@
.@..@..@@..@@@@@@@.@.@@@@@@@@..@@@.@@...@..@@@.@.@.@.@@@.@@@.@@.@.@@..@.@@@.@@@.@..@@@@..@@@@@@..@@@@..@@@@@@.@.@@.@.......@@@.@.@.....
@@.@@@@..@..@.@..@.@.@@@@.@@@@..@@@@@@@@@..@@@@@@.@@@@.@.@@@.@@@@@.@.@.@@.@@..@@..@@@@@@@.....@.@.@..@@@@@@@@@@@.@@@@@.@@.@@@@.@@.@@@@.
@@...@@..@@@@@.@@@@@@.@@@.@.@@@@@@@@@@.@.@@@@..@@@@..@@..@@@@.@@@@..@@.@@.@@@.@@.@.....@@@...@.@@@@@@@...@.@.@@@.@.@@@@...@@@@@@.@@.@@@
@.@@@@.@@@.@@.@@@@@.@@.@@.@@.@@...@@..@@@@@.@@.@..@@@......@@@@.@.@@@@.@@.@@@@.@@@..@@@@@@@@@@.@.@...@@@.@..@.@@@..@@.@@@.@.@.@.@@@@@@@
@@@@@@.@@.@.@@@@@@@@@.@@.@@.@@.@.@@@@.@.@@.@@@.@@@@@.@@.@@.@@@@@..@@@@.@.@@.@..@@@@.@@@@@@...@@@@@@@@...@@.@@@..@..@@@@@.@@.@.@@@..@.@.
..@@...@@@.@@@@.@@@@.@.@@.@@@@@.@@.@....@.....@@@@@@..@@...@@.@.@@@@@..@@@@.@.@@@@@@...@@@.@.@.@@@@.@@...@@@@@@@..@@..@@@@.@@@@.@.@@@..
@.@@.@.@..@@@@@@.@.@..@.@@@.@@@.@@@@@@@.@..@@..@.@@@@.@@@...@@.@@.@@@@@.@.@@..@@@@..@@@@@@@.@.@.@@@.@...@@..@@@@@..@.@.@@@.@.@@.@@@@@@@
.@@@@@@..@.@@@.@@@@@@@@@@@@@@@@@@@..@@..@.@@@@.@@@.@@@@.@..@.@.@@..@.@@@@@@.@@.@@@....@@@@@.@.@.@@.@@@.@.@@@@@.@@@..@@@.@.@@.@.@.@@..@.
@.@@.@.@@@@.@@...@@@@@@.@..@@@.@@.@@.@.@.@.@@.@@@@@.@@@.@.@..@@@@@@@@.@@@@@@.@@@.@@.@..@@@@..@@@@.@.@......@..@@.@@@@...@@....@@@@@.@.@
@..@.@.@..@@@..@....@@@@@.@@@.@@@@@@@@@@.@.@@.@@..@@@@@@..@@@@@@.@@.@...@@.@@@@@@@@.@.@@.@@@.@..@@@@...@..@.@@..@...@@@@..@...@@@.@@.@@
@@@@@.@@...@@@@@.@@@@@.@@@...@.@@@.@@..@@@.@@@@.@@@@..@.@@@@@@.@@@..@@@@@..@.@.@.@..@.@.@@@@@@@..@@@.@@@@@@@.@@.@@.@@@.@.@@@....@.@@.@.
@...@..@.@@..@@.@@@@@.@@..@@.@@@.@@@@@@@@@..@.@@@.....@..@@....@@.@@@.@@@@@@@@.@.@@@@@@@@@@...@..@@.@@@@@@.@.@@@@@@@@@@@.@@@@.@@@@@@@@@
@@.@@@@.@.@.@.@.@@@@..@@@@.@@@..@@@.@@.@@.@@@.@@@.@.@..@@@..@@.@.@@@@.@..@@..@@@@@@@@@@..@.@...@.@..@@.@@.@.@@@@@.@@@.@@..@.@@..@@@@.@.
@@.@..@@@.@.@@@@@.@@@.@..@@.@.@@@.@@@.@@@@...@@@@..@.@..@..@..@@..@.@.@@..@.@@@...@..@.@@@.@@@@.@@.@@.@@..@.@..@.@@@.@.@@..@@.@@@@@@@@@
@@@....@.@@@@.@.@@.@@@@.@@.@@@@...@@@@..@@.@..@@@.@@.@@@@.@@@.@.@.@@@@..@..@@@.@.@@.@@@..@@@@@@.@@.@@.@@@@.@.@@.@@@.@@@@.@@@@.@@@.@.@@@
@.@...@@.@.@..@..@@...@@@.@.@@@@@...@..@@..@.....@@@..@.@@@.@@.@..@@@@.@@.@@@@@@.@.@@@@@.@@@.@@@@..@.@@@@@@@@.@@@..@@.@@.@....@.@..@@@@
..@@...@.@...@@@..@@.@..@....@@@..@@@...@@@@..@@@@.@@@@.@@.@@@.@@.@@@...@@..@@@.@.@@@.@..@.@.@.@..@@..@@@..@.@.@@.@....@@...@@..@@@@.@@
@@@@.@@@@..@@@@@.@.@@@@.@@.@@@@@@@@..@@@@.@...@...@.@@@@.@..@..@.@.@@@.@@@@@@@@@.@@@@@@@@@@@.@@..@.@..@@@@.@@@@.@@@@..@@@@.@@@@.@..@@@.
@.@@@@.@@@@@.@@...@@...@@.@.@...@.......@.@@@.@@@@@@@...@@.@@@@@@.@@.@@..@.@.@@@@.@.@.@@@@@@.@@@.@.@.@.@@@@.@@@@.@@..@@@@@..@@.@.@..@@@
@...@@@.@@@@@@...@.@@....@@.@.@@@@.@@@@....@@@@@@@..@@.@.@@..@@@.@.@.@.@@@@@@@..@@@.@@@..@@@.@.@@..@@@@@@.@@@@@@@@@.@....@.@.@@@@@@@@.@
.@@@@.@.@..@@@@@.@@@@@@@@@..@.@@@.@@@@@@@@@@@.@.@..@@@@.@.@@@.@..@.@...@@@@..@@.@...@..@@@..@@.@@@..@@.@@@@@@@@@@.@@@@@@@@@@...@@..@.@@
@.@@.@@..@.@.@.@@.@..@.@..@@@@@.@@.@.@.@@@@@@@@..@.@@.@@@@@.@.@@@...@@@@@@@@@@.@.@@@@.@.@@@.@@@.@..@@@@@@@...@@@..@.@.@..@@@..@@@@@@@@.
@@@.@@@.@...@.@.@@@@@@@@@@@@..@.@@...@@.@@.@@.@@@@.@@@@.@@.@@@@.@@..@@@@.@@@@@@.@@.@@@@.@@.@@.@.@@.@@.@.@@@@@.@@@@@.@.@@@@.@.@......@@@
..@@@@@..@@...@.@.@@.@@@.@@...@.@@.@@@..@@@@@@@@...@.@.@@@@@...@@..@@..@@@..@.@@.@@@@@@.@...@@.@@.@.@@@@...@@.@@.@..@@@.@.@@@@@@@@@@@@@
@@@@@.@@.@@.@.@.@@@.@@@@@@@..@@@@@@..@.@@..@@..@@@.@@@.@@@.@@@....@@@@@.@@@@.@...@@..@@@.@@@@.@@@@.@..@@.@@@@@@@@..@@.@@@@@@@@.@@@@@@@@
..@@@@@@@.@@..@......@.@@@@.@@.@....@@@..@@.@@@@@@..@@@@@@@..@@@@@.@@@@@@@@...@@@@...@@@.@@@@@.@@@@@.@@.@.@.@.@.@..@@@@@@@.@@@@@@@@@@@.
@@@@@@@@.@@@.@....@.@.@.@.@@@..@@..@..@...@@@@@@@@@@@@@@@.@.@.@@@@@@@@.@@@.@..@.@@.@@@@.@@@.@@.@.@.@..@@.@.@@..@@@@@@@@@@.@.@@@@.@.@@@@
@@@@.@@@@.@@...@@@@@@@@@.@@@...@@...@.@..@@.@@@@@@@..@@@.@.@.@@@@.@@@@@@@@@.@@@..@...@@@.@@.@@.@@@.@..@.@..@@@@.@@..@.@@@@@@@@@@@.@@@.@
@@@..@@.@@.@@@@..@@@.@.@@@@@@@.@@...@@@@..@@@@@@.@.@@@@@@@@...@.@@@@.@@@@.....@@@.@@@.@@.@.@.@@@@@@@@..@@..@.@.@@@...@.@@@@.......@@@@@
@.@@..@.@..@@..@.@@@.@.@...@@@.@@..@@.@@@@@@@@.@.@..@.@.@@@@.@..@.....@@.@@@.@@@...@@@@@@.@.@@@@.@@@@@@@...@@.@@@@.@@.@@@@@@.@@@@@@@@..
.@@@.@.@.@.@@@.@.@..@@@.@.@@@@@@@@.@..@@@.@.@@@@.@...@@.@@.@@@@@@@@.@@.@@..@@.@..@@@@@@@@@..@@@@@@.@@@.@@.@.@@.@..@@@.@@.@@.@.@...@@..@
.@@@@..@.@.@@.@..@@@@@.@@.@@@@@@@.@@.@@@...@@.@@@....@.@@@.@@..@@@..@@.@@.@.@..........@@@.@.@@....@.@@@@.@@..@@@@@.@...@@@.@@@@@.@.@@@
@@...@@...@@.@.@@@..@..@@..@@@@@@@@@.@.@@.@@@.@.@@.@@.@@@@@@.@...@@@@@...@@@@.@..@.@.@..@@@.@..@...@..@@@...@@.........@@@...@@@@..@.@.
@.@@.@@.@..@@@@@@.@.@..@...@@@.@@.@@.@.@@@@.@.@@@@@@...@@@@@...@..@...@@.@.@.@@@@.@@@@@....@@@@@@@@@@@.@@.@@@...@@@@@.@@@..@..@.@@@.@@@
@.@@@@.@..@...@@@.@@@.@.@.@@.@.....@@@@@@.@@@.@@.@..@.@@...@@@@.@@@@@@@@.@.@@@@@@.@@@@@@.@@@.@@@@@.@.@@..@...@@@@@.@.@.@@.@@..@.@.@.@@@
@@@@@@@@@@@.@.@@..@@@@@..@.@@@@@@@@@@@.@@...@@.@@@@@@..@@.@.@.@.@@..@.@@@@@@@@@@@.@@..@@@.@@.@@...@@@@..@@.@@..@@@.@@.@@..@@.@.@@@.@@@@
.@@@@@@@@..@@.@.@@.@@...@@...@@@@.@@@.@@..@@@@.@@.@@@@...@....@.....@@@@@@@@@@@@..@@..@...@@@@@.@@@@...@.@@@@@..@..@.@@..@@.@@@..@@.@.@
.@.@.@.@.@.@@@@.@..@@.@.@@@@.@.@@@@@@.@@@@@@@@@@@@@.@.@@.@.@@.@@@..@..@@@.@@@@@@.....@.@.@..@@@@@@.@.@@.@@@@@@..@.@@.@@.@.@.@@@@@@@@@..
.@@@@@@@@@@..@@..@@@@@.@@@@@@@.@@..@@@.@.@@@.@@.@..@@.@..@@.@.@@@.@@@.@@@@@@@@.@@...@@@@@@.@@.@@.@.@.@@@.@.@@.@...@@@.@....@@...@.@.@..
.@..@@@..@.@.@.@@@@.@@.@@@.@@@@@.@@@.@@@@@..@@@..@@@.@@@@@@@.@@.@@@@....@..@@@@....@.@..@.@@@..@@@.@@@.@.@@..@.@@@.@@.@@@.@....@..@@@@.
.@@.@@@@@.@....@@@@@@@@.@..@@@@@.@@@@@@@@@@@@@..@....@.@..@@.@@.@@.@@.@@.@@..@@@@@@@@...@@.@@@@@@@@@@.@@@@.@@...@..@.@@@@..@@@.@@.@.@@@
.@@@@@.@@@.@@@@@@@@@.@@@..@@@.@@@@@@@.@...@@.@@@@@..@..@@@@@...@.@@@@@.@..@@.@@@@@..@@@.@.@@@@@@@@@@..@@@@@@@@@..@.@@@..@@.@..@@@.@@@@@
.@@@..@@@@..@@@@.@.@@.@@@...@@....@.@.@@@.@@@@@@.@@@.@@@@.@@...@@@@@.@@..@@@.@@@@@@@@.@@@@@@@.@@@@@@.@@.@@.@...@.@..@..@@.@.@@@..@@@...
@.@..@@.@..@.@@@.@.@.@@@..@@@...@@@.@@@....@.@@@@.@@@@@@@..@@@.@@@@@@@@.@..@.@@...@@.@@@...@.@@@@...@@...@.@@@@@@@@.@@@.@....@.@..@@@@.
@@.@@@@@@@.@..@@.@.@.@@...@.@@.@@@@.@@..@@@@.@@@.@@@@@@@@.@@..@..@@@@@@@...@@@.@@@..@@@.@@.@@..@@@@..@@@@@@@@@@.@.@.@@.@@.@@@..@@@...@.
.@@@@..@@.@.@@@@@.@@@@@@.@@....@@@@@.@@@@.@.@@@@@@@@@@@@@.@..@.@.@.@.@@@@.@@@..@.@.@@@@@@@@@..@@@@@@@@@@@@.@.@@.@@@@@...@@@@@@.@@..@..@
@@@.@@@.@....@@.@@@@@..@..@@.@..@@...@@....@@...@...@.@@@@.@.@@@.@.@.@@@.@.@.@@@@@@@@@..@@..@..@.@@..@.....@....@..@.@.@.@.@@@@@@@@@@@.
@.@..@..@@.....@@@.@@@.@@@@..@@@..@@@.@@..@@..@@@@@@..@@.@@.@@@@.....@@.@.@.@...@@@@@@@@.@@@.@@@@@.@@.@@.@@@@.@@.@@.@@@@.@.@.@@@@@.@..@
@@..@@.@.@.@@.@@.@@.@.@@@@..@@..@.@@..@@@@@..@.@@.@@@.@@@@@@..@...@@@@...@@@@@@@...@.@@.@@.@.@.@@@@..@@.@@@@@..@@@@@@@@@@.@@..@@@@@@@@.
.@.@@.@....@@@.@@..@@@..@@@...@@@.@@.@@@@@@@@@@@@..@@@@...@@.@@@..@@@@.@....@.@.@@@.@..@@@@@.@@.@.@@.@@@@.@@...@.@@@@@.@@@..@..@.@.@.@.
@.@@.@@.@@@@@@.@.@@@.@.@@@@..@.@@@@@@.@..@@@@@@.@@@@@@@@@@.@@..@@@@@@.@@@..@@@@..@@..@@@..@@.@@@@.@@@.@@@@.@@....@@@@.@@...@..@@@@@@@..
.@.@....@@@@.@@..@@.@..@@@.@.@.@..@@@@@@..@@@@...@.@@@.@..@@@.@@@@.@.@@@@@@@@...@..@@@.@@.@.@.@@@@@@@..@.@.@.@.@@@@.@..@@@@....@@...@.@
@..@@@@@...@@@@.@.@@..@@@@@@@@@.@.@@@@@@..@.@..@.@@.@.@..@@...@@@.....@@@@@@@@@@@@.@.@@@...@.@.....@@..@@@@@@.@@@@.@@.@@@@@@@@@.@@.@@.."
);
